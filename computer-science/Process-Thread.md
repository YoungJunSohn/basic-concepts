> 프로그램(Program)

---

프로그램이란 `실행 가능한 명령어(instruction)들의 집합` 으로 정의할 수 있다.<br/>

이렇게 보면 프로그램의 정의는 꽤나 광범위하기 때문에, 내 컴퓨터에 설치된 ~~메이플스토리~~도 프로그램이고, 알고리즘 연습을 위해 짠 스크립트파일도 프로그램이다. 중요한 것은 `디스크에 저장된 실행 가능한 명령어의 집합인지의 여부`이다. <br/>
<br/><br/><br/>
> 프로세스(Process)

---

프로세스는 `메모리에 적재(load)된 프로그램`을 말한다.<br/>

즉 현재 실행되고 있는 프로그램을 말하는데, 정적인 프로그램들과는 달리, 실제 실행중인 프로그램을 일컫기 때문에 "동적인 프로그램" 이라고 표현하기도 한다.<br/>

프로세스는 "**프로그램의 인스턴스**" 라고 표현 할 수 있는데 실제 객체 지향의 인스턴스가 그렇듯 한 프로그램에서 실행되는 여러 프로세스가 존재할 수 있다. 다만 객체지향과 차이점이 있다면, 클래스처럼 다른 프로그램을 상속하지는 않는다.<br/>

프로세스는 `커널` 에 의해 관리되는데, 커널 메모리 안에는 관리하고 있는 각각의 프로세스들에 대한 데이터들이 있다. 이러한 정보는 PCB(Process Control Block : 프로세스 제어 블록)에 기록된다.<br/>
<br/><br/>
<메모리 영역 구분도>

![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/484c1e1e-1044-48d6-81c4-8bbe698d02b9/Untitled.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/484c1e1e-1044-48d6-81c4-8bbe698d02b9/Untitled.png)

PCB는 `프로세스의 주민등록증`이라고 볼 수 있다. PCB는 프로세스가 생성될 때 프로세스에 대한 모든 데이터를 기록하여 함께 생성되며, 프로세스가 끝나면 망자의 주민등록이 말소되듯이 PCB도 함께 제거된다.<br/>

이때 가상 메모리 안에는 커널 영역을 제외한 유저 영역의 메모리 공간에는 다음 4가지 분류로 나뉜다.<br/>
<br/>
1. Code(text) : 프로그램의 실제 코드를 저장<br/>
2. Data : 프로세스가 실행 될 때 정의된 전역 변수, Static 변수를 저장<br/>
3. Heap : 프로세스 런타임 중 동적으로 할당되는 변수들을 저장(함수내에 정의되는 변수 등)<br/>
4. Stack : 함수에서 다른 함수를 실행하는 등의 서브루틴들을 저장 (재귀코드를 작성했을 때 StackOverflow Error가 발생하는 이유)<br/>
<br/><br/>
운영체제는 각각의 프로세스를 독립적으로 관리하기 때문에 서로 다른 프로세스가 충돌할 일이 없고, 사용되는 자원들이 절대 겹쳐서도 안된다. 한 가지 예외로, 같은 프로그램들의 Code 영역은 공유된다. 메모리상의 코드 공간을 주소로 참조하는 방식으로 운영된다.
<br/><br/><br/><br/>
> Multi-Tasking 과 Context Switch

---

우리는 컴퓨터로 음악을 들으면서 동시에 문서작업을 할 수도 있으며 메신저로 메시지를 보낼 수도 있다.<br/> 그렇다면 컴퓨터는 이 과정을 정말로 동시에(multi) 수행하고 있는 것일까?<br/>

결론부터 말하자면, **아니다**.<br/>  운영체제는 Time-Sharing 이라는 기법 아래서 사용자가 "동시에" 라고 느낄 만큼 `아주 빠르게 현재 작업하고(CPU를 점유하고) 있는 프로세스의 자원을 다른 프로세스로 양보하는 것`이다.<br/>

이처럼 어떤 `프로그램 1` 에서 `프로그램 2` 로 자원을 양보했다고 가정하자.<br/>

이때 이슈가 발생할 수 있다. 그것은 **" `프로그램 1` 이 `프로그램 2` 로부터 다시 자원을 양도 받았을 때, 마지막으로 어떤 작업을 수행하고 있었는지 어떻게 기억해야 할까?** " 이다.<br/>

이는 매우 중요한 이슈인데 이것은 PCB에 의해 해결된다.<br/> 위처럼 작업이 전환되고 자원이 양도될 때 , 이런 `프로세스들의 정보(Context)` 는 PCB에 기록된다.  이후 다시 자신의 차례가 왔을 때 PCB에 저장된 작업 기록을 불러와 작업을 재개한다. 이런 교체 과정을 `Context Switch` 라고 한다.<br/>
<br/><br/><br/><br/>
> 스레드(Thread)

---

스레드는 `프로세스 내에서 실행되는 흐름` 이다.<br/>

우리가 만드는 일반적인 프로그램은 한줄 한줄 순서대로 실행된다.<br/> 프로그램을 구성하는 부분들이 있고, 각 부분마다 실행되는 결과물들이 순차적으로 연결된 구조를 가질 것이다.<br/>

가령, json 데이터를 DB에 업데이트해야 한다고 생각해보면<br/>
<br/><br/>
1. json 데이터를 불러와서<br/>
2. 내용을 수정한 뒤<br/>
3. 디스크에 저장하는<br/>
<br/><br/>
이러한 일련의 과정을 거쳐야 한다. 이것이 `하나의 스레드`이다.<br/> 이 경우 각 작업간의 의존 관계가 있기 때문에 어쩔 수 없이 하나의 과정이 끝나야 다음 과정을 수행할 수 있으며 이런 순차적인 방식의 단점이 바로 **병목현상이 발생하여 실행 속도가 느려진다는 것이다.**<br/>

오늘날 운영체제는 이러한 현상을 방지 또는 완화하기 위해 하나의 프로세스 안에 여러 스레드가 동시에 존재할 수 있는 `멀티 스레딩(Multi-threading)`을 지원한다. 방식은 위처럼 하나의 작업이 다른 작업에 영향을 끼치지 않는 경우, 작업의 종료를 기다릴 필요가 없으므로 실행되는 흐름, 즉 스레드를 여러 개 두어 작업시간을 단축시킨다.<br/>

일반적으로 하나의 프로세스는 하나의 스레드로 시작되며, 이것을 `메인 스레드(Main-Thread)`라고 한다. 그리고 스레드를 추가적으로 생성하지 않는 한, 프로세스의 모든 작업은 이 메인 스레드 내부에서 실행된다.<br/>
<br/><br/><br/><br/>
> 프로세스와 스레드의 차이(결론)

---

결국 프로세스와 스레드의 차이는 무엇일까? 이는 다음과 같다.

[Difference](https://www.notion.so/dc07dd918b4b46f6878e1c05e8194d27)