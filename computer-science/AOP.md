# AOP (Aspect-Oriented Programming) 관점 지향 프로그래밍이란?

<br/>

관점 지향 프로그래밍이라는 말에서 유추할 수 있듯이, `관점 지향 프로그래밍(이하 AOP)`은 바라보는 대상을 바꿔보자는 것이다.<br/>
<br/>
프로젝트 구조를 바라보는 관점을 바꾼다는 말은, 얼핏 들어서 이해가 잘 가지 않는다.<br/>
Spring을 예로 들면, Controller 에서 여러 Service를 주입받았을 때<br/>
Service들 각각에 부가 기능들이 공통적으로 해줄 일이 생기는 경우가 있다.<br/>
<br/>

*AOP는 여기서부터 시작한다*<br/>
<br/>

기존의 OOP를 보던 관점을 다르게 하여 측면에서 볼 때, 이 각 Service들이 갖는 공통적인 특성을<br/>
하나의 모듈로 분리한다는 것이다. 이때 가로 횡단 부분을 잘라냈다고 하여, *Cross Cutting* 이라고 부르기도 한다.<br/>
<br/>
메이플을 예로 들어보자<br/>
메이플에는 경매장도 있고, 사냥터도 있고, 마이스터빌도 있고, 자유시장도 있다.<br/>
공격 스킬의 경우, 사냥터에서는 사용이 가능하지만 경매장, 마이스터빌, 자유시장에서는 사용할 수 없다.<br/>
이때 공격 스킬이 바로 `공통 관심사`가 되어, `크로스커팅` 대상이 되는 하나의 `모듈로 정의`될 수 있다.<br/>
<br/>
<br/>
이처럼 AOP를 사용하면서 발생하는 장점은 다음과 같다.<br/>

* 어플리케이션 전체에 흩어진 공통 기능들이 하나의 장소에서 관리된다는 점<br/>
* 다른 서비스 모듈들이 본인의 목적에만 충실하고 그 외 사항들은 신경쓰지 않아도 된다는 점<br/>
<br/><br/><br/>
---

## AOP 용어

*타겟(Target)*<br/>
부가 기능을 부여할 대상을 말한다.<br/>
이때 부여 대상은 Service가 된다.(핵심 기능을 담당하는 클래스, 메서드 등등)<br/>
<br/><br/>

*에스팩트(Aspect)*<br/>
부가 기능 모듈을 말하며, 핵심기능에 부가되어 의미를 갖는 기능을 말한다<br/>
에스팩트는 부가될 기능을 정의한 **어드바이스**와, 어드바이스를 어디에 적용할지 결정하는 **포인트컷**을 함께 갖고 있다.<br/>
<br/><br/>

*어드바이스(Advice)*<br/>
실질적으로 부가 기능을 담고 있는 구현체를 말한다.<br/>
어드바이스의 경우, 타겟 오브젝트에 종속되지 않기 때문에 순수하게 부가기능에만 집중할 수 있다.<br/>
어드바이스에는 에스팩트가 '언제', '무엇'을 할 지 정의되어 있다.<br/>
<br/><br/>

*포인트컷(PointCut)*<br/>
부가기능이 적용될 대상(메소드)를 선정하는 방법을 말한다.<br/>
즉, 어드바이스를 적용할 조인포인트를 선별하는 기능을 정의한 모듈을 말한다.<br/>
<br/><br/>

*조인포인트(JoinPoint)*<br/>
어드바이스가 적용될 수 있는 위치를 말한다.<br/>
다른 AOP 프레임워크와는 달리 Spring에서는 메소드 조인포인트만 제공하고 있다.<br/>
따라서 스프링 프레임워크에서 조인포인트라고 하면 메소드라고 이해해도 무방하다.<br/>
타 프레임워크의 경우, 예외상황/필드값이 수정될 경우 등도 지원한다.<br/>
<br/><br/>

*프록시(Proxy)*<br/>
타겟을 감싸서 타겟의 요청을 대신 받아주는 랩핑(Wrapping) 오브젝트이다.<br/>
호출자(클라이언트)에서 타겟을 호출하게 되면, 타겟을 감싸고 있는 프록시가 호출되어, 타겟 메소드 실행 전에<br/>
<br/>
전처리 -> 타겟 메소드 실행 -> 후처리<br/>
<br/>
순서로 실행하도록 구성되어 있다.<br/>
<br/><br/>

*인트로덕션(Introduction)*<br/>
타겟 클래스에 코드 변경없이, 신규 메소드나, 멤버변수를 추가하는 기능을 말한다.<br/>
<br/><br/>

*위빙(Weaving)*<br/>
지정된 객체에 에스팩트를 적용해서 새로운 프록시 객체를 생성하는 과정을 말한다.<br/>
<br/>
만약 어떤 `객체`에 트랜잭션 에스팩트가 지정되어 있는 경우<br/>
이 `객체`가 실행 되기전 커넥션을 오픈하고 실행 종료 후 커넥션을 종료하는 기능이 추가된 `프록시 객체가 생성`되며,<br/>
`프록시 객체`가 이후 `객체`가 호출 되는 시점에서 사용된다.<br/>
<br/>
이때 `프록시 객체`가 생성되는 과정을 `위빙`이라고 한다.<br/>