# HTTP 프로토콜이란?

HTTP 프로토콜이란 HTML 문서와 같은 리소스들을 가져올 수 있도록 해주는 통신 규약이다.<br/>
HTTP는 웹에서 이루어지는 모든 데이터 교환의 기초이며, 클라이언트-서버 프로토콜이기도 하다.<br/>
<br/><br/>
클라이언트-서버 프로토콜이란 보통 웹 브라우저 즉 수신자측에 의해 요청이 초기화되는 프로토콜을 의미한다.<br/>
데이터로 전송되는 하나의 완전한 문서는 텍스트, 레이아웃 설명, 이미지, 비디오, 스크립트 등 불러온 하위 문서들로 재구성된다.<br/>
<br/>

---

클라이언트와 서버들은 개별적인 메시지 교환에 의해 통신한다.<br/>
보통 브라우저인 클라이언트에 의해 전송되는 메시지를 요청(requests) 이라 하고,<br/>
서버에서 클라이언트로 전송하는 메시지를 응답(responses) 라고 한다.<br/>
<br/>
<img src="/basic-concepts/images/HTTP & layers.png" width="600px" height="480px" title="HTTP의 구조" alt="HTTP"></img><br/>
<br/>
1990년대초에 설계된 HTTP는 지속적으로 진화해온 확장가능한 프로토콜이다.<br/>
HTTP는 애플리케이션 계층의 프로토콜로, 신뢰 가능한 전송 프로토콜이라면 이론상 무엇이든 사용할 수 있으나,<br/>
TCP 혹은 암호화된 TCP연결인 TLS를 통해 전송된다.<br/>
<br/><br/>

---

> HTTP 기반의 시스템 구성 요소

HTTP는 클라이언트 - 서버 프로토콜이다. 요청은 하나의 사용자(또는 그것을 대체하는 프록시)에 의해 전송된다.<br/>
대부분의 경우, 사용자는 브라우저이지만 무엇이든지 사용자가 될 수 있다.<br/>
<br/>
각각의 개별적인 요청은 서버로 보내지며, 서버는 요청을 처리한 뒤 응답을 제공한다.<br/>
요청과 응답 사이에는 여러 개체들이 있는데 다양한 작업을 수행하는 게이트웨이 또는 캐시 역할을 하는 프록시 등이 있다.<br/>
<br/>
쉽게 생각하자면 Client <--(요청 및 응답)--> proxy <--(요청 및 응답)--> Server 의 관계가 된다.<br/>
<br/>
<br/>

---

> 프록시

웹 브라우저와 서버 사이에는 수많은 컴퓨터와 머신이 HTTP 메시지를 이어받고 전달한다.<br/>
이처럼 사이에서 중계적으로 동작하는 수많은 컴퓨터와 머신을 프록시라고 부른다.<br/>
프록시는 눈에 보일수도, 보이지 않을 수도 있으며 다양한 기능을 수행할 수 있다.<br/>
<br/><br/>

* 캐싱(캐시는 공개 또는 비공개가 될 수 있다.)<br/>
* 필터링(바이러스 백신 스캔, 유해 컨텐츠 차단 - 키즈락 같은 기능)<br/>
* 로드 밸런싱(여러 서버들이 서로 다른 요청을 처리하고, 부하를 분산)<br/>
* 인증(다양한 리소스에 대한 접근 제어 - 보안성)<br/>
* 로깅(이력 정보를 저장)<br/>
<br/>
<br/>

---

> HTTP의 특징

- HTTP는 확장이 가능하다.<br/>
<br/>
HTTP 1.0에서 등장한 HTTP 헤더는 HTTP를 확장하고, 실험하기 쉽도록 만들어주었다. 클라이언트가 새로운 헤더의 시맨틱에 대해 
간단한 합의만 한다면, 언제든지 새로운 기능을 추가할 수 있다.<br/>
<br/><br/>
- HTTP는 상태가 없지만 세션은 있다.<br/>
<br/>
HTTP는 상태를 저장하지 않는 Stateless 의 통신 규약이다. 동일한 연결 상에서 연속하여 전달된 두 요청 사이에는 연결 고리가 
당연하게도 존재하지 않는다.<br/>
그렇다면 로그인과 같이 사용자가 서버와 상호작용하는 정보를 서버가 알게 하려면 어떻게 해야 할까?<br/>
많은 방법이 있겠지만 HTTP 쿠키가 상태가 있는 세션을 HTTP에 제공함으로서 이것이 가능해진다.<br/>
헤더 확장성을 사용하여, 동일한 컨텍스트 또는 동일한 상태를 공유하기 위해 각 요청들에 세션을 만들도록 HTTP 쿠키가 추가된다.<br/>
<br/>
<br/>
<br/>
<br/>

> HTTP의 흐름

클라이언트가 서버와 통신하고자 할 때 다음과 같은 과정을 수행한다.<br/>
<br/>
1. *TCP 연결을 연다.* TCP 연결은 요청을 보내거나, 응답을 받는데 사용한다. 클라이언트는 새 연결을 열거나, 기존 연결을 재사용하거나, 
서버에 대한 여러 TCP 연결을 열 수 있다.<br/>
<br/>
2. *HTTP 메세지를 전송한다.* HTTP 메세지(HTTP/2 이전의)는 인간이 읽을 수 있다.<br/>
HTTP/2 에서는 이런 간단한 메시지가 프레임 속으로 캡슐화되어, 직접 읽는게 불가능하지만 원칙은 동일하다.<br/>
<br/>
3. *서버에 의해 전송된 응답을 읽어들인다.*<br/>
4. *연결을 닫거나 다른 요청들을 위해 재사용한다.*<br/>
<br/>
<br/>

> HTTP 메시지

HTTP/1.1 과 초기 HTTP 메시지는 사람이 읽을 수 있다.<br/>
HTTP/2에서, 이 메세지들은 새로운 이진 구조인 프레임 안으로 임베드되어, 헤더의 압축과 다중화와 같은 최적화를 가능케 한다.<br/>
본래의 HTTP 메세지의 일부분만이 이 버전의 HTTP 내에서 전송된다고 할지라도, 각 메시지의 의미들은 변화하지 않으며 <br/>
클라이언트는 본래의 HTTP/1.1 요청을 재구성한다.<br/>
그러므로 HTTP/1.1 포맷 내에서 HTTP/2 를 이해하는 것은 여전히 유용하다.<br/>
<br/>

---

HTTP의 요청은 다음과 같은 요소들로 구성된다.<br/>
* HTTP 메서드 : 보통 클라이언트가 수행하고자 하는 동작을 정의한 GET, POST 같은 동사나 OPTIONS/HEAD와 같은 명사이다.<br/>
일반적으로 클라이언트는 GET을 통해 리소스를 읽어들인다.<br/>
* 가져오려는 리소스의 경로 : 프로토콜(http:// or https://) / 도메인(www.github.com) / 또는 TCP 포트(80) 등의 요소들을 제거한 리소스의 URL이다.<br/>
* HTTP 프로토콜의 버전<br/>
* 서버에 대한 추가 정보를 전달하는 선택적 헤더<br/>
<br/>
<br/>

---
HTTP의 응답은 다음과 같은 요소들로 구성된다.<br/>
* HTTP 프로토콜의 버전<br/>
* 요청의 성공 여부와, 그 이유를 나타내는 *HTTP상태코드*<br/>
* 아무런 영향력이 없는, 상태 코드의 짧은 설명을 나타내는 상태 메시지<br/>
* 요청 헤더와 비슷한, HTTP 헤더들<br/>

