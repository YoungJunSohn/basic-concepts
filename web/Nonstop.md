# 무중단배포

> 무중단배포란?

무중단배포란, 서버를 서비스하고있고, 이에 대한 변경사항을 적용할 때 서비스적 장애와 배포에 있어서 부담을 최소화하게끔 
서버를 중단하지 않으면서 코드를 배포하는 기술이다.<br/>
이전에는 배포 자체가 커다란 작업이었고, 이를 위해 개발자들이 날을 잡고 새벽에 배포하는 일이 잦았지만 최근에는 
무중단배포 기능을 탑재한 배포 자동화 툴을 이용하여 개발자들이 스스로 배포까지 담당하는 Dev-Ops의 역할을 하게 되면서,
Dev-Ops의 필수 기술 중 하나가 되었다.<br/>
<br/>
<br/>


> 무중단배포에 주로 사용되는 것들

<br/>
1. AWS의 Blue-Green 무중단배포(Blue = 기존버전, Green = 새로운 버전 / 
Router를 통해 Blue로 이동하는 트래픽을 Green으로 이동시켜 준다. 원리는 동일하다.)<br/>
<br/>
2. Docker를 이용한 웹서비스 무중단 배포<br/>
<br/>
3. IDC에서 직접 L4 스위치를 이용해서 진행하는 무중단 배포<br/>
<br/>
4. NginX 등의 오픈소스 소프트웨어를 사용하여 무중단 배포<br/>
<br/>
<br/>
<br/>

> 무중단배포의 원리

핵심원리는 다음과 같다.<br/>
Reverse Proxy 가 서로 다른 인스턴스에 각기 다른 포트와 서브 도메인으로 연결하고,<br/>
지속적으로 Health Check 하면서<br/>
배포시 서브도메인을 메인도메인으로 Switching 해주고<br/>
배포가 끝나면 다시 메인도메인으로 Reload 해주는 것이다.<br/>
<br/>
이때 주의해야 할 점은 배포가 서비스에 영향을 주지 않도록 해야 한다는 것이다.<br/>
예를 들어 DB의 구조를 변경하는 JPA와 같은 기술들이 사용되었을 경우 배포전 검토가 반드시 필요하다.

